{{FrontSide}}

<div id="answer">

<script>
var selectedAnswer = null;
if (Persistence.isAvailable()) {
    selectedAnswer = Persistence.getItem("selectedAnswer");
    Persistence.clear(); // Clear for next card
}

// Get the correct answer
var correctAnswer = "{{CorrectChoice}}";

// Show result
var resultDiv = document.createElement('div');
resultDiv.style.marginTop = '20px';
resultDiv.style.fontSize = '18px';
resultDiv.style.fontWeight = 'bold';

if (selectedAnswer === null) {
    resultDiv.innerHTML = '<span style="color: orange;">No answer selected!</span>';
} else if (selectedAnswer === correctAnswer) {
    resultDiv.innerHTML = '<span style="color: green;">✓ Correct!</span>';
} else {
    resultDiv.innerHTML = '<span style="color: red;">✗ Incorrect! The correct answer was option ' + correctAnswer + '</span>';
}

// Add result after the form
document.querySelector('form').appendChild(resultDiv);

// Highlight correct answer
if (correctAnswer === "1") {
    document.getElementById('rb1').parentElement.style.backgroundColor = '#d4edda';
} else if (correctAnswer === "2") {
    document.getElementById('rb2').parentElement.style.backgroundColor = '#d4edda';
} else if (correctAnswer === "3") {
    document.getElementById('rb3').parentElement.style.backgroundColor = '#d4edda';
}

// If user selected wrong answer, highlight it in red
if (selectedAnswer !== null && selectedAnswer !== correctAnswer) {
    if (selectedAnswer === "1") {
        document.getElementById('rb1').parentElement.style.backgroundColor = '#f8d7da';
    } else if (selectedAnswer === "2") {
        document.getElementById('rb2').parentElement.style.backgroundColor = '#f8d7da';
    } else if (selectedAnswer === "3") {
        document.getElementById('rb3').parentElement.style.backgroundColor = '#f8d7da';
    }
}

// Disable all radio buttons on back side
document.getElementById('rb1').disabled = true;
document.getElementById('rb2').disabled = true;
document.getElementById('rb3').disabled = true;
</script>

</div>
